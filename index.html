<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=yes, width=device-width">
  <title>Cisco Kubernetes Client â€” Index</title>
  <link rel="shortcut icon" href="/favicon.ico">

  <!--[if lt IE 9]>
  <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link type="text/css" rel="stylesheet" href="styles/sunlight.dark.css">

  <link type="text/css" rel="stylesheet" href="styles/site.oblivion.css">
</head>
<body>
<div class="container-fluid">
  <div class="navbar navbar-fixed-top navbar-inverse">
    <div class="navbar-inner">
      <a class="brand" href="index.html">Cisco Kubernetes Client</a>
      <ul class="nav">
        
        <li class="dropdown">
          <a href="namespaces.list.html" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b
            class="caret"></b></a>

          <ul class="dropdown-menu ">
            
            <li>
              <a href="api.html">api</a>
            </li>
            
            <li>
              <a href="api.v1.html">api.v1</a>
            </li>
            
            <li>
              <a href="apis.html">apis</a>
            </li>
            
            <li>
              <a href="apis.extensions.html">apis.extensions</a>
            </li>
            
            <li>
              <a href="apis.extensions.v1beta1.html">apis.extensions.v1beta1</a>
            </li>
            
            <li>
              <a href="oapi.html">oapi</a>
            </li>
            
            <li>
              <a href="oapi.v1.html">oapi.v1</a>
            </li>
            

          </ul>
        </li>
        
        <li class="dropdown">
          <a href="modules.list.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b
            class="caret"></b></a>

          <ul class="dropdown-menu ">
            
            <li>
              <a href="module-_%2520index.html">* index</a>
            </li>
            
            <li>
              <a href="module-auth.html">auth</a>
            </li>
            
            <li>
              <a href="module-client.html">client</a>
            </li>
            
            <li>
              <a href="module-endpoints.html">endpoints</a>
            </li>
            
            <li>
              <a href="module-errors.html">errors</a>
            </li>
            

          </ul>
        </li>
        
        <li class="dropdown">
          <a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b
            class="caret"></b></a>

          <ul class="dropdown-menu ">
            
            <li>
              <a href="module-client.KubernetesClient.html">client.KubernetesClient</a>
            </li>
            
            <li>
              <a href="module-client-ClientConfig.html">client~ClientConfig</a>
            </li>
            
            <li>
              <a href="module-endpoints-Endpoint.html">endpoints~Endpoint</a>
            </li>
            
            <li>
              <a href="module-endpoints-NodesEndpoint.html">endpoints~NodesEndpoint</a>
            </li>
            
            <li>
              <a href="module-endpoints-ReplicationControllersEndpoint.html">endpoints~ReplicationControllersEndpoint</a>
            </li>
            
            <li>
              <a href="module-endpoints-WatchEmitter.html">endpoints~WatchEmitter</a>
            </li>
            
            <li>
              <a href="module-errors.HttpError.html">errors.HttpError</a>
            </li>
            
            <li>
              <a href="module-errors.ParameterError.html">errors.ParameterError</a>
            </li>
            
            <li>
              <a href="module-errors.TokenParseError.html">errors.TokenParseError</a>
            </li>
            
            <li>
              <a href="module-errors.VersionError.html">errors.VersionError</a>
            </li>
            
            <li>
              <a href="module-errors-ClientError.html">errors~ClientError</a>
            </li>
            

          </ul>
        </li>
        
        <li class="dropdown">
          <a href="events.list.html" class="dropdown-toggle" data-toggle="dropdown">Events<b
            class="caret"></b></a>

          <ul class="dropdown-menu ">
            
            <li>
              <a href="module-endpoints.html#~event:create">event:create</a>
            </li>
            
            <li>
              <a href="module-endpoints.html#~event:delete">event:delete</a>
            </li>
            
            <li>
              <a href="module-endpoints.html#~event:error">event:error</a>
            </li>
            
            <li>
              <a href="module-endpoints.html#~event:response">event:response</a>
            </li>
            
            <li>
              <a href="module-endpoints.html#~event:update">event:update</a>
            </li>
            

          </ul>
        </li>
        
      </ul>
    </div>
  </div>

  <div class="row-fluid">

    
    <div class="span3">
      <div id="toc"></div>
    </div>
    

    
    <div class="span9">
      
        <div id="main">
          


	
	<span class="page-title">Index</span>
	
	












	
	





    <section class="readme-section">
        <article><p><img src="https://raw.githubusercontent.com/ryclarke/cisco-kube-client/gh-pages/img/cisco-k8s.png" alt="banner"></p>
<h1>Cisco Kubernetes Client for Node.js</h1><p><a href="https://github.com/ryclarke/cisco-kube-client"><img src="https://raw.githubusercontent.com/ryclarke/cisco-kube-client/gh-pages/img/github-mark.png" alt="github-icon"></a> <a href="https://nodei.co/npm/cisco-kube-client/"><img src="https://nodei.co/npm/cisco-kube-client.png" alt="npm-icon"></a></p>
<p>A <a href="https://nodejs.org">Node.js</a> client library for <a href="http://kubernetes.io">Kubernetes</a> and <a href="https://www.openshift.org">OpenShift</a>. This client
allows a Node.js application to easily interface with a Kubernetes or
OpenShift master using the respective <a href="https://docs.openshift.org/latest/rest_api/index.html">APIs</a>.</p>
<p>Full technical documentation is provided <a href="http://ryclarke.github.io/cisco-kube-client">here</a>.</p>
<h2>Getting Started</h2><h4>Installation</h4><p>The latest stable version of the client is available from <a href="https://nodei.co/npm/cisco-kube-client/">npm</a>:</p>
<pre class="prettyprint source"><code>npm install cisco-kube-client</code></pre><h4>Configuration</h4><p>The client constructor must be given an object with properties defining
the desired configuration. Information about both required and optional
parameters can be found below.</p>
<p><strong>Required parameters</strong></p>
<pre class="prettyprint source lang-js"><code>{
    //String:   Hostname of the API server
    host: 'https://localhost:8443'

    //String:   Version of the API server   Default: 'v1'
    , version: 'v1'

    //Object:   Credentials sent to the oAuth provider
    , auth: {
        user: '&lt;username>'      //String: Username
        , pass: '&lt;password>'    //String: Password
    }
}</code></pre><p><strong>Optional parameters</strong></p>
<pre class="prettyprint source lang-js"><code>{
    //String:   Default client namespace     Default: null
    , namespace: 'default'

    //Number:   Level of log output          Default: 'fatal'
    , loglevel: 'fatal'

    //Boolean:  Enable Extensions endpoints  Default: false
    , beta: false

    //Boolean:  Enable OpenShift endpoints   Default: false
    , oshift: false

    //Boolean:  Return a client Promise      Default: false
    , usePromise: false

    //Number:   HTTP request timeout in ms   Default: null
    , timeout: 10000

    //String:   Access token for oAuth       Default: null
    , token: null

    //String:   Host protocol                Default: 'https'
    , protocol: 'https'

    //Number:   Host port                    Default: 8443
    , port: 8443

    // Note that 'protocol' and 'port' properties are only checked if
    // the corresponding component is missing from the 'host' property.
}</code></pre><h4>Usage Pattern</h4><p>The Cisco Kubernetes Client utilizes promises from the <a href="https://bluebirdjs.com">bluebird</a>
Node.js module for asynchronous processing. Promises are the recommended
usage pattern for the Cisco Kubernetes Client. See <a href="https://www.promisejs.org/">here</a> for
more information on proper promise usage.</p>
<p>The client constructor will return a Promise of the client, which will
resolve when initialization has completed.</p>
<p>Almost all endpoint methods will return promises of the response data.
The only exception to this is the <code>watch</code> method, which returns an
EventEmitter object with <code>data</code> events instead.</p>
<pre class="prettyprint source lang-js"><code>var Client = require('cisco-kube-client');

//Minimum viable configuration example
var options = {
    host: 'localhost'
    , auth: {
        user: 'johndoe'
        , pass: 'password123'
    }
};

Client(options).then(function (client) {
    // Use the client here
    client.&lt;resource>.&lt;method>.then(function (result) {
        // Process the result here
    });
});</code></pre><h4>Callback support</h4><p>The client also has full compatibility with Node.js style callbacks if
you prefer not to use promises in your application.</p>
<p>If the client constructor or any endpoint methods receive a function as
the last parameter, instead of returning a promise that function will
be used as a callback with the promise's value as the second parameter.</p>
<pre class="prettyprint source lang-js"><code>var Client = require('cisco-kube-client');

var options = {
    host: 'localhost'
    , version: 'v1'
};

Client(options, function (error, client) {
    // Use the client here
});</code></pre><h2>Client features</h2><p><strong>Structure</strong></p>
<p>All API resource endpoints are accessed with the following template:</p>
<pre class="prettyprint source lang-js"><code>client.&lt;resource>.&lt;method></code></pre><p>The accepted parameters and return values for each method are consistent
across all API resource endpoints.</p>
<p>Valid values for <code>&lt;resource&gt;</code> and <code>&lt;method&gt;</code> are detailed below.</p>
<h4>Available Kubernetes resources</h4><p>See the official <a href="https://docs.openshift.org/latest/rest_api/kubernetes_v1.html">API specification</a> for details.</p>
<ul>
<li><code>endpoints</code></li>
<li><code>events</code></li>
<li><code>limitRanges</code></li>
<li><code>namespaces</code></li>
<li><code>nodes</code></li>
<li><code>persistentVolumeClaims</code></li>
<li><code>persistentVolumes</code></li>
<li><code>podTemplates</code></li>
<li><code>pods</code></li>
<li><code>replicationControllers</code></li>
<li><code>resourceQuotas</code></li>
<li><code>secrets</code></li>
<li><code>serviceAccounts</code></li>
<li><code>services</code></li>
</ul>
<h3>Available Extensions resources</h3><p>See the official <a href="https://docs.openshift.org/latest/rest_api/kubernetes_v1.html">API specification</a> for details.
Only available if the client has been configured with <code>beta: true</code></p>
<h3>Available OpenShift resources</h3><p>See the official <a href="https://docs.openshift.org/latest/rest_api/openshift_v1.html">API specification</a> for details.
Only available if the client has been configured with <code>oshift: true</code></p>
<h4>Available methods</h4><p><strong>Basic methods</strong></p>
<p>These expose fundamental API server functionality:</p>
<pre class="prettyprint source lang-js"><code>   get ([query], [opts], [callback])
 watch ([query], [opts], [callback])
create (body, [opts], [callback])
update (query, body, [opts], [callback])
 patch (query, body, [opts], [callback])
delete (query, [opts], [callback])</code></pre><p>The optional <code>opts</code> argument is an object containing properties to be
applied to the internal http request. This allows for per-call overrides
of library default functionality. The most common use for this is to
specify request headers and/or query strings. The <code>namespace</code> property
is also recognized to override the default namespace filter settings for
the client. Additionally, the <code>labels</code> and <code>fields</code> properties may
contain labelSelector and fieldSelector options, respectively.</p>
<p><strong>Watch method</strong></p>
<p>The <code>watch</code> method is unique in that it returns a Promise of a custom
EventEmitter object rather than an API response body. The initial state
of the watched resource is fetched and is available as the
<code>initialState</code> property of the emitter object. The watch connection will
not be initialized until the emitter's <code>start</code> method is called. This
allows for the user to set up all event listeners without missing any
watch events. The events that will be emitted are <code>response</code>, <code>create</code>,
<code>update</code>, <code>delete</code>, and <code>error</code>.</p>
<pre class="prettyprint source lang-js"><code>// Watch for updates to all resources of type &lt;resource>
client.&lt;resource>.watch().then(function (em) {
    console.log(em.initialState);   // Current state of the resource

    // Set up event listeners
    em.on('create', createHandler);
    em.on('update', updateHandler);
    em.on('delete', deleteHandler);

    em.start(); // Start the watch connection with the API server
});</code></pre><p><strong>Nested endpoints</strong></p>
<p>Some resources have nested resource endpoints available within them.
These are exposed by name under the parent resource. Inspect the client
object for access to the complete list of available methods.</p>
<pre class="prettyprint source lang-js"><code>console.log(client);    // Print available resources and methods</code></pre><p>Nested endpoints may be accessed as shown below. Note that <em>all</em> nested
endpoints operate on a single top level resource, so the query parameter
is always required.</p>
<pre class="prettyprint source lang-js"><code>//Base endpoint:    client.&lt;resource>.&lt;method>

var podPromise = client.pods.get('&lt;podName>');

//Nested endpoint:  client.&lt;parent>.&lt;resource>.&lt;method>

var podLogPromise = client.pods.logs.get('&lt;podName>');</code></pre><p><strong>Compound methods</strong></p>
<p>In addition to the base functionality offered by the API itself, this
client also implements some methods for batch operations. These methods
are exposed through the <code>nodes</code> resource and act on all pods running on
the given node.</p>
<pre class="prettyprint source lang-js"><code>   getPods (query, [opts], callback)        // Get all pods
 patchPods (query, body, [opts], callback)  // Patch all pods
deletePods (query, [opts], callback)        // Delete all pods
  evacuate (query, [opts], callback)        // Evacuate a node</code></pre><p>The <code>evacuate</code> method flags the given node as unschedulable via an
internal call to <code>patch</code> and removes all pods residing on the given node
via an internal call to <code>deleteFrom</code>.</p>
<h4>Proxy resources</h4><p>These can be accessed using: <code>client['proxy/&lt;resource&gt;'].&lt;method&gt;</code></p>
<p>Available resources are <code>nodes</code>, <code>pods</code>, and <code>services</code>. These proxy
resources have been implemented based on the Kubernetes API, but they
have not been tested. <strong>USE AT YOUR OWN RISK!</strong></p>
<h2>Examples</h2><h4>Getting from pods</h4><p>To get all pods:</p>
<pre class="prettyprint source lang-js"><code>client.pods.get().then(function (pods) {
    console.log('pods:', pods);
});</code></pre><h4>Defining a custom API group</h4><p>Custom API groups can be defined according to the Kubernetes
specification. These APIS are reached at apis/{name} by default, but
a custom <code>prefix</code> parameter can be defined to change this. Nested
endpoints and per-endpoint request options can also be specified.</p>
<p>All endpoints defined in the API specification's <code>spec</code> property will
be added to the client's list of available endpoints.</p>
<pre class="prettyprint source lang-js"><code>client.defineAPI({
    name: 'apiGroup'
    , spec: {
        endpoints: {
            kind: 'Endpoint'
        }
    }
});
// Adds a property `client.endpoints` -> {host}/apis/apiGroup/endpoints</code></pre><h4>Defining a custom resource endpoint</h4><p>Individual endpoints can also be added on demand. Use the following
method to define a single custom endpoint:</p>
<pre class="prettyprint source lang-js"><code>client.createEndpoint('test', spec);
// then use the test resource like any other top level endpoint</code></pre><h2>Version compatibility</h2><p>This client is built to interface with version <code>v1</code> of the official
Kubernetes and OpenShift APIs. While backward compatibility with older
versions has been attempted, it cannot be guaranteed. No further support
will be offered for API versions that have been deprecated.</p></article>
    </section>







        </div>

        <div class="clearfix"></div>
        <footer>
          
          
    <span class="copyright">
    Copyright Â© 2016 <a href='https://cisco.com' target='_blank'>Cisco Systems, Inc.</a>
    </span>
          <br />
          
    <span class="jsdoc-message">
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc" target="_blank">JSDoc 3.4.0</a>
    on 2016-06-10T14:00:46-04:00
    </span>
        </footer>
      </div>

      <br clear="both">
    </div>

  </div>
  <!--<script src="scripts/sunlight.js"></script>-->
  <script src="scripts/docstrap.lib.js"></script>
  <script src="scripts/bootstrap-dropdown.js"></script>
  <script src="scripts/toc.js"></script>

  <script>
    $( function () {
      $( "[id*='$']" ).each( function () {
        var $this = $( this );

        $this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
      } );

      $( "#toc" ).toc( {
        anchorName  : function ( i, heading, prefix ) {
          return $( heading ).attr( "id" ) || ( prefix + i );
        },
        selectors   : "h1,h2,h3,h4",
        showAndHide : false,
        scrollTo    : "100px"
      } );

      $( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
      $( "#main span[id^='toc']" ).addClass( "toc-shim" );
      $( '.dropdown-toggle' ).dropdown();
//      $( ".tutorial-section pre, .readme-section pre" ).addClass( "sunlight-highlight-javascript" ).addClass( "linenums" );

      $( ".tutorial-section pre, .readme-section pre" ).each( function () {
        var $this = $( this );

        var example = $this.find( "code" );
        exampleText = example.html();
        var lang = /{@lang (.*?)}/.exec( exampleText );
        if ( lang && lang[1] ) {
          exampleText = exampleText.replace( lang[0], "" );
          example.html( exampleText );
          lang = lang[1];
        } else {
          lang = "javascript";
        }

        if ( lang ) {

          $this
            .addClass( "sunlight-highlight-" + lang )
            .addClass( "linenums" )
            .html( example.html() );

        }
      } );

      Sunlight.highlightAll( {
        lineNumbers : true,
        showMenu : true,
        enableDoclinks : true
      } );
    } );
   </script>



  <!--Navigation and Symbol Display-->
  


  <!--Google Analytics-->
  

</body>
</html>